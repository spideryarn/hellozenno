# Project: Consistent Colour & Font Refresh

## Goal & Context

- **Goal:** Update the frontend colour scheme and font usage to be consistent, elegant, and friendly, moving away from the current "1980s mainframe" aesthetic towards a softer, pastel feel.
- **Primary Driver:** Use the green from the logo (`#669A73`) as the new primary colour.
- **Consistency:** Ensure colours and fonts are defined centrally using CSS variables and applied consistently across all Svelte components, replacing hardcoded values.
- **Fonts:** Reinforce the use of the defined font stack: Georgia (main), Times New Roman italic (foreign), Menlo (monospace).

## Principles & Key Decisions

- **Centralised Styling:** Define all theme colours as CSS variables in `theme-variables.css`. Avoid hardcoding colours directly in `.svelte` files or other CSS files where possible.
- **Semantic Naming:** Use clear, semantic names for colour variables (e.g., `--hz-color-primary`, `--hz-color-accent-peach`, `--hz-color-text-main`).
- **Harmonious Palette:** Choose accent colours that complement the primary green (`#669A73`) and fit the "friendly elegant pastel" theme.
- **Accessibility:** Ensure sufficient contrast between text and background colours, especially after the changes. (We may need to check this later).
- **Minimal Changes:** Focus on updating colours and fonts according to the new palette. Avoid unrelated refactoring.
- **Iterative Review:** Systematically review all Svelte components.

## New Colour Palette (Proposed)

| Variable Name                   | Hex       | Description                       | Old Variable (approx) |
|---------------------------------|-----------|-----------------------------------|-----------------------|
| `--hz-color-primary-green`        | `#669A73` | Primary Brand Green (Logo)      | `--bs-primary`        |
| `--hz-color-primary-green-light`  | `#80B890` | Lighter Green (Hover)           | `--bs-primary-hover`  |
| `--hz-color-primary-green-dark`   | `#537E5C` | Darker Green (Active/Focus)     | *New*                 |
| `--hz-color-background`         | `#0b0b0e` | Near-black Background           | `--bs-body-bg`        |
| `--hz-color-surface`            | `#1e1e1e` | Dark Gray Surface (Cards)       | `--bs-card-bg`        |
| `--hz-color-border`             | `#333333` | Subtle Border (Cards)           | `--bs-card-border-color`|
| `--hz-color-text-main`          | `#f8f9fa` | Near-white Main Text            | `--bs-body-color`     |
| `--hz-color-text-secondary`     | `#d7dadd` | Light Gray Secondary Text       | `--bs-text-secondary` |
| `--hz-color-accent-peach`       | `#F5B8A8` | Soft Peach Accent (Secondary)   | `--bs-secondary`      |
| `--hz-color-accent-lavender`    | `#D0C0E8` | Gentle Lavender Accent (Tertiary) | *Replaces Lilac*      |
| `--hz-color-accent-sky-blue`    | `#A8D8F0` | Muted Sky Blue Accent (Info)    | `--bs-accent-sky`     |
| `--hz-color-accent-gold`        | `#F8DDA8` | Soft Gold Accent (Alert/Warning)| *Replaces Orange*     |
| `--hz-shadow-primary-green`     | `0 4px 12px rgba(102, 154, 115, 0.25)` | Primary Shadow            | `--bs-shadow-mint`    |
| `--hz-shadow-primary-green-lg`  | `0 6px 16px rgba(102, 154, 115, 0.35)` | Larger Primary Shadow     | `--bs-shadow-mint-lg` |

*Note: We will prefix theme variables with `hz-color-` for clarity and to avoid potential clashes with Bootstrap.*

## Useful References

- [STYLING.md](./frontend/docs/STYLING.md) - **HIGH** - Current styling guidelines (will be updated).
- [theme-variables.css](./frontend/static/css/theme-variables.css) - **HIGH** - Where new colours will be defined.
- [theme.css](./frontend/static/css/theme.css) - **HIGH** - Where theme overrides using variables are applied.
- [logo.png](./frontend/static/logo.png) - **MEDIUM** - Source of the primary green colour.
- [Bootstrap 5.3 Docs](https://getbootstrap.com/docs/5.3/customize/css-variables/) - **MEDIUM** - For understanding base variables if needed.

## Actions

- [ ] **Phase 1: Update Core Styles & Docs**
    - [ ] Update `planning/250423_colour.md` with final colour palette choices (this task).
    - [ ] Update `frontend/static/css/theme-variables.css` with the new `--hz-color-*` variables.
    - [ ] Update `frontend/static/css/theme.css` to use the new `--hz-color-*` variables (e.g., for `.btn-primary`, `.text-mint`, component styles). Remove old mint/accent references.
    - [ ] Update `frontend/docs/STYLING.md` to reflect the new palette, variable names, and font guidelines.
- [ ] **Phase 2: Component Audit & Refinement**
    - [ ] Generate a list of all `.svelte` files under `frontend/src`.
    - [ ] Systematically review each `.svelte` file listed in the checklist below. For each file:
        - [ ] **Read:** Read the file content (`<script>` and `<style>` sections, and template).
        - [ ] **Hardcoded Colors:** Check for any hardcoded colours (e.g., hex `#aabbcc`, `rgb(...)`, named colours like `white`, `black` unless clearly appropriate).
        - [ ] **Replace Colors:** Replace hardcoded colours with appropriate `--hz-color-*` variables from `theme-variables.css`.
        - [ ] **Old Classes:** Check for usage of old theme classes (e.g., `.text-mint`) and replace with new ones (e.g., `.text-primary-green`).
        - [ ] **Font Usage:** Verify font usage aligns with the theme: `Georgia` (default via body style), `Times New Roman italic` (`var(--hz-font-foreign)` via `.hz-foreign-text` class), `Menlo` (`var(--hz-font-monospace)`).
        - [ ] **Foreign Text:** Identify any text explicitly representing the target/foreign language and ensure it uses the `.hz-foreign-text` class for correct styling (font and italics).
        - [ ] **Other Styles:** Briefly check button styles, link styles, highlights, borders, backgrounds to ensure they visually align with the new theme and primarily use theme variables or standard Bootstrap classes.
        - [ ] **Update Checklist:** Mark the file as reviewed `[x]` in the Svelte File Checklist below.
    - [ ] Systematically review each `.svelte` file:
        - [ ] Check for hardcoded colours (hex, rgb) and replace with `--hz-color-*` variables.
        - [ ] Check for usage of old Bootstrap colour classes (e.g., `text-primary`, `bg-secondary`) and update if necessary to align with the new theme's intent (might involve custom classes or utility classes using new variables).
        - [ ] Verify font usage (`Georgia`, `Times New Roman italic`, `Menlo`).
        - [ ] Check button styles, link styles, highlights, borders, backgrounds.
        - [ ] Update the checklist below as files are reviewed.
- [ ] **Phase 3: Testing & Finalisation**
    - [ ] Manually review key pages/components in the browser to check visual consistency and appearance.
    - [ ] Check accessibility (contrast) for critical text/background combinations.

## Svelte File Checklist

*(Populated by `find frontend/src -name '*.svelte' | sed 's/^/[ ] /' | sort`)*

```
[x] frontend/src/lib/components/Alert.svelte
[x] frontend/src/lib/components/Card.svelte
[x] frontend/src/lib/components/CollapsibleHeader.svelte
[x] frontend/src/lib/components/DescriptionFormatted.svelte
[x] frontend/src/lib/components/DescriptionSection.svelte
[x] frontend/src/lib/components/DirectoryOperationsSection.svelte
[x] frontend/src/lib/components/EnhancedText.svelte
[x] frontend/src/lib/components/FileOperationsSection.svelte
[x] frontend/src/lib/components/LemmaCard.svelte
[x] frontend/src/lib/components/LemmaContent.svelte
[x] frontend/src/lib/components/LemmaDetails.svelte
[x] frontend/src/lib/components/LoadingSpinner.svelte
[x] frontend/src/lib/components/MetadataCard.svelte
[x] frontend/src/lib/components/MetadataSection.svelte
[x] frontend/src/lib/components/NavTabs.svelte
[x] frontend/src/lib/components/PhraseCard.svelte
[x] frontend/src/lib/components/SearchBarMini.svelte
[ ] frontend/src/lib/components/SearchResults.svelte
[ ] frontend/src/lib/components/Sentence.svelte
[ ] frontend/src/lib/components/SentenceCard.svelte
[ ] frontend/src/lib/components/SourceItem.svelte
[ ] frontend/src/lib/components/SourcedirHeader.svelte
[ ] frontend/src/lib/components/SourcefileAudio.svelte
[ ] frontend/src/lib/components/SourcefileImage.svelte
[ ] frontend/src/lib/components/SourcefileLayout.svelte
[ ] frontend/src/lib/components/WordformCard.svelte
[ ] frontend/src/routes/+error.svelte
[ ] frontend/src/routes/+layout.svelte
[ ] frontend/src/routes/+page.svelte
[ ] frontend/src/routes/auth/+page.svelte
[ ] frontend/src/routes/auth/profile/+page.svelte
[ ] frontend/src/routes/experim/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/+error.svelte
[ ] frontend/src/routes/language/[target_language_code]/+layout.svelte
[ ] frontend/src/routes/language/[target_language_code]/flashcards/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/flashcards/sentence/[slug]/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/lemma/[lemma]/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/lemmas/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/phrase/[slug]/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/phrases/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/search/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/search/[wordform]/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/sentence/[slug]/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/sentences/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/audio/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/components/NavButtons.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/components/SourcefileAudioTab.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/components/SourcefileFooter.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/components/SourcefileHeader.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/components/SourcefileImageTab.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/components/SourcefilePhrases.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/components/SourcefileText.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/components/SourcefileTranslation.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/components/SourcefileWords.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/image/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/phrases/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/text/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/translation/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/source/[sourcedir_slug]/[sourcefile_slug]/words/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/sources/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/test-error/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/wordform/[wordform]/+page.svelte
[ ] frontend/src/routes/language/[target_language_code]/wordforms/+page.svelte
[ ] frontend/src/routes/languages/+page.svelte
[ ] frontend/src/stories/Button.stories.svelte
[ ] frontend/src/stories/Button.svelte
[ ] frontend/src/stories/Header.stories.svelte
[ ] frontend/src/stories/Header.svelte
[ ] frontend/src/stories/Page.stories.svelte
[ ] frontend/src/stories/Page.svelte
```

## Appendix

- **[P] `frontend/src/lib/components/EnhancedText.svelte`:**
  - **Issue:** Applying theme color variables caused persistent linter errors.
  - **Needed Changes:**
    - Replace hardcoded colors in `.word-link` styles (old green `#4CAD53`) with `--hz-color-primary-green`.
    - Update custom Tippy tooltip theme (`.tippy-box[data-theme~='hz-dark']`) to use theme variables (`--hz-color-surface`, `--hz-color-border`, `--hz-color-text-main`, etc.) instead of hardcoded grays/text colors.
    - Map other hardcoded colors (e.g., orange `#d97a27`, gray `#aaaaaa`) in tooltip content (`.inflection-type`, `.etymology`, `.translation.error`, `.debug-info`) to semantic theme variables (`--hz-color-accent-gold`, `--hz-color-text-secondary`, etc.).
  - **Problem:** Edits led to TypeScript errors (`'error' is of type 'unknown'`, `Argument of type 'string | undefined' is not assignable...` for `data-lemma`) that couldn't be resolved automatically in 3 attempts.
  - **Action:** Skip for now, needs manual review/fix later.
