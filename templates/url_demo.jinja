{% extends "base.jinja" %}

{% block title %}
    URL Generation Demo
{% endblock title %}

{% block content %}
<div class="container">
    <h1>URL Generation with endpoint_for</h1>
    
    <section class="demo-section">
        <h2>URL Generation Examples</h2>
        
        <div class="card">
            <h3>Sourcedir URLs</h3>
            <div class="url-example">
                <code>sourcedirs_list</code>
                <p>{{ url_for(endpoint_for(sourcedirs_list), target_language_code=target_language_code) }}</p>
                <a href="{{ url_for(endpoint_for(sourcedirs_list), target_language_code=target_language_code) }}" class="button">Visit Page</a>
            </div>
        </div>
        
        <div class="card">
            <h3>Lemma URLs</h3>
            <div class="url-example">
                <code>lemmas_list</code>
                <p>{{ url_for(endpoint_for(lemmas_list), target_language_code=target_language_code) }}</p>
                <a href="{{ url_for(endpoint_for(lemmas_list), target_language_code=target_language_code) }}" class="button">Visit Page</a>
            </div>
            
            <div class="url-example">
                <code>get_lemma_metadata</code>
                <p>{{ url_for(endpoint_for(get_lemma_metadata), target_language_code=target_language_code, lemma='γεια') }}</p>
                <a href="{{ url_for(endpoint_for(get_lemma_metadata), target_language_code=target_language_code, lemma='γεια') }}" class="button">View 'γεια' Lemma</a>
            </div>
        </div>
        
        <div class="card">
            <h3>Nested Function Usage</h3>
            <p>The nested function call works well with IDE completion in Python code:</p>
            <pre><code>return render_template(
    'url_demo.jinja',
    sourcedirs_list=sourcedirs_list,
    lemmas_list=lemmas_list,
    get_lemma_metadata=get_lemma_metadata,
    # More functions can be added easily
    target_language_code=target_language_code
)</code></pre>
        </div>
    </section>
    
    <section class="demo-section">
        <h2>Code Analysis</h2>
        
        <div class="pros-cons">
            <div class="pros">
                <h3>Pros</h3>
                <ul>
                    <li>Explicit dependencies (view functions passed directly)</li>
                    <li>Refactoring safety (function renames caught immediately)</li>
                    <li>No string literals or hardcoded URLs</li>
                    <li>Minimal setup (one context processor)</li>
                    <li>Works with IDE auto-completion in Python code</li>
                </ul>
            </div>
            
            <div class="cons">
                <h3>Cons</h3>
                <ul>
                    <li>Longer syntax in templates</li>
                    <li>Need to pass each function explicitly</li>
                    <li>Nested function call may be confusing at first</li>
                </ul>
            </div>
        </div>
    </section>
</div>
{% endblock content %}

{% block head_css %}
<style>
    .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .demo-section {
        margin-bottom: 40px;
    }
    
    .card {
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 0.5rem;
        padding: 1rem;
        margin-bottom: 1rem;
    }
    
    .url-example {
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px dashed #e2e8f0;
    }
    
    .url-example:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }
    
    .url-example code {
        display: inline-block;
        background: #f1f5f9;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-family: monospace;
        margin-bottom: 0.5rem;
    }
    
    .url-example p {
        background: #f1f5f9;
        padding: 0.5rem;
        border-radius: 0.25rem;
        font-family: monospace;
        font-size: 0.875rem;
        overflow-wrap: break-word;
        word-break: break-all;
        margin: 0.5rem 0;
    }
    
    .button {
        display: inline-block;
        background: #3b82f6;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 0.25rem;
        text-decoration: none;
        font-size: 0.875rem;
    }
    
    .button:hover {
        background: #2563eb;
    }
    
    .pros-cons {
        display: flex;
        gap: 1rem;
    }
    
    .pros, .cons {
        flex: 1;
        padding: 1rem;
        border-radius: 0.5rem;
    }
    
    .pros {
        background: #f0fdf4;
        border: 1px solid #bbf7d0;
    }
    
    .cons {
        background: #fff1f2;
        border: 1px solid #fecdd3;
    }
    
    .pros h3, .cons h3 {
        margin-top: 0;
    }
    
    pre {
        background: #f1f5f9;
        padding: 1rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        font-size: 0.875rem;
    }
    
    @media (max-width: 768px) {
        .pros-cons {
            flex-direction: column;
        }
    }
</style>
{% endblock head_css %}